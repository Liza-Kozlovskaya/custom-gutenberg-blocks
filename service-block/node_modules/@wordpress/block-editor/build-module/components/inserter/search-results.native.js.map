{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/search-results.native.js"],"names":["FlatList","View","TouchableHighlight","TouchableWithoutFeedback","Dimensions","useState","useEffect","BottomSheet","BottomSheetConsumer","InserterButton","styles","MIN_COL_NUM","InserterSearchResults","items","onSelect","onClose","numberOfColumns","setNumberOfColumns","itemWidth","setItemWidth","maxWidth","setMaxWidth","addEventListener","onLayout","removeEventListener","calculateItemWidth","Styles","modalItem","itemPaddingLeft","paddingLeft","itemPaddingRight","paddingRight","width","modalIconWrapper","sumLeftRightPadding","columnPadding","bottomSheetWidth","getWidth","containerTotalWidth","itemTotalWidth","columnsFitToWidth","Math","floor","numColumns","max","updatedItemWidth","listProps","safeAreaBottomInset","rowSeparator","item","name","contentContainerStyle","paddingBottom","list"],"mappings":";;;;;AAAA;AACA;AACA;AACA,SACCA,QADD,EAECC,IAFD,EAGCC,kBAHD,EAICC,wBAJD,EAKCC,UALD,QAMO,cANP;AAQA;AACA;AACA;;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,SACCC,WADD,EAECC,mBAFD,EAGCC,cAHD,QAIO,uBAJP;AAMA;AACA;AACA;;AACA,OAAOC,MAAP,MAAmB,cAAnB;AAEA,IAAMC,WAAW,GAAG,CAApB;;AAEA,SAASC,qBAAT,OAA+D;AAAA,MAA7BC,KAA6B,QAA7BA,KAA6B;AAAA,MAAtBC,QAAsB,QAAtBA,QAAsB;AAAA,MAAZC,OAAY,QAAZA,OAAY;;AAAA,kBACdV,QAAQ,CAAEM,WAAF,CADM;AAAA;AAAA,MACtDK,eADsD;AAAA,MACrCC,kBADqC;;AAAA,mBAE1BZ,QAAQ,EAFkB;AAAA;AAAA,MAEtDa,SAFsD;AAAA,MAE3CC,YAF2C;;AAAA,mBAG5Bd,QAAQ,EAHoB;AAAA;AAAA,MAGtDe,QAHsD;AAAA,MAG5CC,WAH4C;;AAK9Df,EAAAA,SAAS,CAAE,YAAM;AAChBF,IAAAA,UAAU,CAACkB,gBAAX,CAA6B,QAA7B,EAAuCC,QAAvC;AACA,WAAO,YAAM;AACZnB,MAAAA,UAAU,CAACoB,mBAAX,CAAgC,QAAhC,EAA0CD,QAA1C;AACA,KAFD;AAGA,GALQ,EAKN,EALM,CAAT;;AAOA,WAASE,kBAAT,GAA8B;AAAA,gCAIzBhB,cAAc,CAACiB,MAAf,CAAsBC,SAJG;AAAA,QAEfC,eAFe,yBAE5BC,WAF4B;AAAA,QAGdC,gBAHc,yBAG5BC,YAH4B;AAAA,QAKrBC,KALqB,GAKXvB,cAAc,CAACiB,MAAf,CAAsBO,gBALX,CAKrBD,KALqB;AAM7B,WAAOA,KAAK,GAAGJ,eAAR,GAA0BE,gBAAjC;AACA;;AAED,WAASP,QAAT,GAAoB;AACnB,QAAMW,mBAAmB,GACxBxB,MAAM,CAACyB,aAAP,CAAqBN,WAArB,GACAnB,MAAM,CAACyB,aAAP,CAAqBJ,YAFtB;AAIA,QAAMK,gBAAgB,GAAG7B,WAAW,CAAC8B,QAAZ,EAAzB;AACA,QAAMC,mBAAmB,GAAGF,gBAAgB,GAAGF,mBAA/C;AACA,QAAMK,cAAc,GAAGd,kBAAkB,EAAzC;AAEA,QAAMe,iBAAiB,GAAGC,IAAI,CAACC,KAAL,CACzBJ,mBAAmB,GAAGC,cADG,CAA1B;AAIA,QAAMI,UAAU,GAAGF,IAAI,CAACG,GAAL,CAAUjC,WAAV,EAAuB6B,iBAAvB,CAAnB;AAEAvB,IAAAA,kBAAkB,CAAE0B,UAAF,CAAlB;AACAtB,IAAAA,WAAW,CAAEiB,mBAAmB,GAAGK,UAAxB,CAAX;;AAEA,QAAKH,iBAAiB,GAAG7B,WAAzB,EAAuC;AACtC,UAAMkC,gBAAgB,GACrB,CAAET,gBAAgB,GAAG,IAAIF,mBAAzB,IAAiDvB,WADlD;AAEAQ,MAAAA,YAAY,CAAE0B,gBAAF,CAAZ;AACA;AACD;;AAED,SACC,cAAC,WAAD;AACC,IAAA,SAAS,EAAG,IADb;AAEC,IAAA,OAAO,EAAG9B,OAFX;AAGC,IAAA,UAAU,MAHX;AAIC,IAAA,aAAa;AAJd,KAMC,cAAC,kBAAD;AAAoB,IAAA,UAAU,EAAG;AAAjC,KACC,cAAC,mBAAD,QACG;AAAA,QAAI+B,SAAJ,SAAIA,SAAJ;AAAA,QAAeC,mBAAf,SAAeA,mBAAf;AAAA,WACD,cAAC,QAAD;AACC,MAAA,QAAQ,EAAGxB,QADZ;AAEC,MAAA,GAAG,uBAAkBP,eAAlB,CAFJ,CAE2C;AAF3C;AAGC,MAAA,yBAAyB,EAAC,QAH3B;AAIC,MAAA,UAAU,EAAGA,eAJd;AAKC,MAAA,IAAI,EAAGH,KALR;AAMC,MAAA,sBAAsB,EAAG;AAAA,eACxB,cAAC,wBAAD;AAA0B,UAAA,UAAU,EAAG;AAAvC,WACC,cAAC,IAAD;AAAM,UAAA,KAAK,EAAGH,MAAM,CAACsC;AAArB,UADD,CADwB;AAAA,OAN1B;AAWC,MAAA,YAAY,EAAG,sBAAEC,IAAF;AAAA,eAAYA,IAAI,CAACC,IAAjB;AAAA,OAXhB;AAYC,MAAA,UAAU,EAAG;AAAA,YAAID,IAAJ,SAAIA,IAAJ;AAAA,eACZ,cAAC,cAAD,EACM;AACJA,UAAAA,IAAI,EAAJA,IADI;AAEJ/B,UAAAA,SAAS,EAATA,SAFI;AAGJE,UAAAA,QAAQ,EAARA,QAHI;AAIJN,UAAAA,QAAQ,EAARA;AAJI,SADN,CADY;AAAA;AAZd,OAsBMgC,SAtBN;AAuBC,MAAA,qBAAqB,+BACjBA,SAAS,CAACK,qBADO,IAEpB;AACCC,QAAAA,aAAa,EACZL,mBAAmB,IACnBrC,MAAM,CAAC2C,IAAP,CAAYD;AAHd,OAFoB;AAvBtB,OADC;AAAA,GADH,CADD,CAND,CADD;AA+CA;;AAED,eAAexC,qBAAf","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tFlatList,\n\tView,\n\tTouchableHighlight,\n\tTouchableWithoutFeedback,\n\tDimensions,\n} from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport {\n\tBottomSheet,\n\tBottomSheetConsumer,\n\tInserterButton,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst MIN_COL_NUM = 3;\n\nfunction InserterSearchResults( { items, onSelect, onClose } ) {\n\tconst [ numberOfColumns, setNumberOfColumns ] = useState( MIN_COL_NUM );\n\tconst [ itemWidth, setItemWidth ] = useState();\n\tconst [ maxWidth, setMaxWidth ] = useState();\n\n\tuseEffect( () => {\n\t\tDimensions.addEventListener( 'change', onLayout );\n\t\treturn () => {\n\t\t\tDimensions.removeEventListener( 'change', onLayout );\n\t\t};\n\t}, [] );\n\n\tfunction calculateItemWidth() {\n\t\tconst {\n\t\t\tpaddingLeft: itemPaddingLeft,\n\t\t\tpaddingRight: itemPaddingRight,\n\t\t} = InserterButton.Styles.modalItem;\n\t\tconst { width } = InserterButton.Styles.modalIconWrapper;\n\t\treturn width + itemPaddingLeft + itemPaddingRight;\n\t}\n\n\tfunction onLayout() {\n\t\tconst sumLeftRightPadding =\n\t\t\tstyles.columnPadding.paddingLeft +\n\t\t\tstyles.columnPadding.paddingRight;\n\n\t\tconst bottomSheetWidth = BottomSheet.getWidth();\n\t\tconst containerTotalWidth = bottomSheetWidth - sumLeftRightPadding;\n\t\tconst itemTotalWidth = calculateItemWidth();\n\n\t\tconst columnsFitToWidth = Math.floor(\n\t\t\tcontainerTotalWidth / itemTotalWidth\n\t\t);\n\n\t\tconst numColumns = Math.max( MIN_COL_NUM, columnsFitToWidth );\n\n\t\tsetNumberOfColumns( numColumns );\n\t\tsetMaxWidth( containerTotalWidth / numColumns );\n\n\t\tif ( columnsFitToWidth < MIN_COL_NUM ) {\n\t\t\tconst updatedItemWidth =\n\t\t\t\t( bottomSheetWidth - 2 * sumLeftRightPadding ) / MIN_COL_NUM;\n\t\t\tsetItemWidth( updatedItemWidth );\n\t\t}\n\t}\n\n\treturn (\n\t\t<BottomSheet\n\t\t\tisVisible={ true }\n\t\t\tonClose={ onClose }\n\t\t\thideHeader\n\t\t\thasNavigation\n\t\t>\n\t\t\t<TouchableHighlight accessible={ false }>\n\t\t\t\t<BottomSheetConsumer>\n\t\t\t\t\t{ ( { listProps, safeAreaBottomInset } ) => (\n\t\t\t\t\t\t<FlatList\n\t\t\t\t\t\t\tonLayout={ onLayout }\n\t\t\t\t\t\t\tkey={ `InserterUI-${ numberOfColumns }` } //re-render when numberOfColumns changes\n\t\t\t\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\t\t\t\tnumColumns={ numberOfColumns }\n\t\t\t\t\t\t\tdata={ items }\n\t\t\t\t\t\t\tItemSeparatorComponent={ () => (\n\t\t\t\t\t\t\t\t<TouchableWithoutFeedback accessible={ false }>\n\t\t\t\t\t\t\t\t\t<View style={ styles.rowSeparator } />\n\t\t\t\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tkeyExtractor={ ( item ) => item.name }\n\t\t\t\t\t\t\trenderItem={ ( { item } ) => (\n\t\t\t\t\t\t\t\t<InserterButton\n\t\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\titemWidth,\n\t\t\t\t\t\t\t\t\t\tmaxWidth,\n\t\t\t\t\t\t\t\t\t\tonSelect,\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ...listProps }\n\t\t\t\t\t\t\tcontentContainerStyle={ [\n\t\t\t\t\t\t\t\t...listProps.contentContainerStyle,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpaddingBottom:\n\t\t\t\t\t\t\t\t\t\tsafeAreaBottomInset ||\n\t\t\t\t\t\t\t\t\t\tstyles.list.paddingBottom,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</BottomSheetConsumer>\n\t\t\t</TouchableHighlight>\n\t\t</BottomSheet>\n\t);\n}\n\nexport default InserterSearchResults;\n"]}